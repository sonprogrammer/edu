{"version":3,"sources":["../src/selectorAction.js"],"names":["selectorAction","args","length","Error","actionCreator","selectors","Array","isArray","slice","forEach","selector","generatedActionCreator","dispatchArg","getStateArg","action","internalGeneratedSelectorAction","dispatch","getState","state","appliedSelectors","map","IS_SELECTOR_ACTION","originalActionCreator","module","exports"],"mappings":";;;;;;AAAA,SAASA,cAAT,GAAiC;AAAA,oCAANC,IAAM;AAANA,IAAAA,IAAM;AAAA;;AAC/B,MAAIA,IAAI,CAACC,MAAL,KAAgB,CAApB,EAAuB;AACrB,UAAM,IAAIC,KAAJ,CAAU,yCAAV,CAAN;AACD,GAH8B,CAI/B;;;AACA,MAAMC,aAAa,GAAGH,IAAI,CAACA,IAAI,CAACC,MAAL,GAAc,CAAf,CAA1B,CAL+B,CAM/B;;AACA,MAAIG,SAAJ;;AACA,MAAIJ,IAAI,CAACC,MAAL,KAAgB,CAAhB,IAAqBI,KAAK,CAACC,OAAN,CAAcN,IAAI,CAAC,CAAD,CAAlB,CAAzB,EAAiD;AAC/CI,IAAAA,SAAS,GAAGJ,IAAI,CAAC,CAAD,CAAhB;AACD,GAFD,MAEO;AACLI,IAAAA,SAAS,GAAGJ,IAAI,CAACO,KAAL,CAAW,CAAX,EAAcP,IAAI,CAACC,MAAL,GAAc,CAA5B,CAAZ;AACD;;AACD,MAAI,OAAOE,aAAP,KAAyB,UAA7B,EAAyC;AACvC,UAAM,IAAID,KAAJ,CAAU,mCAAV,CAAN;AACD;;AACDE,EAAAA,SAAS,CAACI,OAAV,CAAkB,UAACC,QAAD,EAAc;AAC9B,QAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClC,YAAM,IAAIP,KAAJ,CAAU,6BAAV,CAAN;AACD;AACF,GAJD;;AAKA,MAAMQ,sBAAsB,GAAG,SAASA,sBAAT,CAC7BC,WAD6B,EAE7BC,WAF6B,EAG7B;AACA,QAAMC,MAAM,GAAG,SAASC,+BAAT,CACbC,QADa,EAEbC,QAFa,EAGb;AACA,UAAMC,KAAK,GAAGD,QAAQ,EAAtB;AACA,UAAME,gBAAgB,GAAGd,SAAS,CAACe,GAAV,CAAc,UAACV,QAAD;AAAA,eAAcA,QAAQ,CAACQ,KAAD,CAAtB;AAAA,OAAd,CAAzB;AACA,aAAOF,QAAQ,CAACZ,aAAa,MAAb,6CAAiBe,gBAAjB,UAAmCD,KAAnC,GAAD,CAAf;AACD,KAPD;;AAQAJ,IAAAA,MAAM,CAACO,kBAAP,GAA4B,IAA5B,CATA,CAUA;;AACA,QAAIT,WAAW,IAAIC,WAAnB,EAAgC;AAC9B,aAAOC,MAAM,CAACF,WAAD,EAAcC,WAAd,CAAb;AACD,KAbD,CAcA;;;AACA,WAAOC,MAAP;AACD,GAnBD,CArB+B,CAyC/B;;;AACAH,EAAAA,sBAAsB,CAACW,qBAAvB,GAA+ClB,aAA/C;AACAO,EAAAA,sBAAsB,CAACU,kBAAvB,GAA4C,IAA5C;AACA,SAAOV,sBAAP;AACD;;AAEDY,MAAM,CAACC,OAAP,GAAiBxB,cAAjB","sourcesContent":["function selectorAction(...args) {\n  if (args.length === 0) {\n    throw new Error('selectorAction called with no arguments');\n  }\n  // actionCreator: takes selector results as arguments, returns a Redux action\n  const actionCreator = args[args.length - 1];\n  // Selectors: functions of state -> any. May be passed in as a single array or multiple arguments.\n  let selectors;\n  if (args.length === 2 && Array.isArray(args[0])) {\n    selectors = args[0];\n  } else {\n    selectors = args.slice(0, args.length - 1);\n  }\n  if (typeof actionCreator !== 'function') {\n    throw new Error('Action creators must be functions');\n  }\n  selectors.forEach((selector) => {\n    if (typeof selector !== 'function') {\n      throw new Error('Selectors must be functions');\n    }\n  });\n  const generatedActionCreator = function generatedActionCreator(\n    dispatchArg,\n    getStateArg,\n  ) {\n    const action = function internalGeneratedSelectorAction(\n      dispatch,\n      getState,\n    ) {\n      const state = getState();\n      const appliedSelectors = selectors.map((selector) => selector(state));\n      return dispatch(actionCreator(...appliedSelectors, state));\n    };\n    action.IS_SELECTOR_ACTION = true;\n    // If this action creator is called as a thunk, we can dispatch directly.\n    if (dispatchArg && getStateArg) {\n      return action(dispatchArg, getStateArg);\n    }\n    // Otherwise this is a bonafide action creator which returns a thunk action\n    return action;\n  };\n  // expose the original action creator for testing\n  generatedActionCreator.originalActionCreator = actionCreator;\n  generatedActionCreator.IS_SELECTOR_ACTION = true;\n  return generatedActionCreator;\n}\n\nmodule.exports = selectorAction;\n"],"file":"selectorAction.js"}